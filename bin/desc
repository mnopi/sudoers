#!/bin/sh

# Show description for script (absolute path) or executable (in PATH).
#
. strict.lib 2>/dev/null || { set -eu; PATH="$("$(dirname "${0}")/colon")" && export PATH && . strict.lib; }
. die.lib

main() {
  script="${1}"
  echo "${1}" | grep -qE '^/' || { script="$(which "${script}")" || die Not Found: "${1}"; }
  _desc="$(awk '/^#/ && ! /^#!/ && ! /^##/ && ! /^#$/ && ! /^# shellcheck/ {sub(/^# /, ""); print $0=$0 }' \
    "${script}" | head -1)"
  [ "${_desc-}" ] || die Not Description: "${script}"
  echo "${_desc}"
  exit
}

for arg do
  case "${arg}" in
    -h|--help) usage "${0}" ;;
    --desc) main "${0}" ;;
    --version) sudoers --version ;;
  esac
  exit
done
