# shellcheck shell=sh

#
# Rebash library.

####################################### rebash
# Rebash
# Globals
#   OPTION        Option to profile.
#   PATH          PATH.
#   PROFILE       Path to profile.
# Optional Arguments:
#   caller        if caller is file, parent caller will be prefixed to 'PROFILE'.
#   force         Force regenerate files for 'PROFILE'.
#   version       Version.
#######################################
# shellcheck disable=SC2240
rebash() {
  OPTION="${1:-}"

  if [ -x "${OPTION:-}" ] && bin="${OPTION%/*}" && [ "${bin}" != "/usr/local/bin" ]; then
    root="${bin%/*}"
    PATH="${root}/sbin:${bin}:${PATH}"; unset bin
    OPTION="${2:-}"
  fi
  PROFILE="${root:-}/etc/profile"; unset root
  [ -r "${PROFILE}" ] || { echo rebash.lib: "${PROFILE}": No such file; return 1 2>/dev/null || exit 1; }
  . "${PROFILE}"
}

# shellcheck disable=SC3045
[ ! "${BASH_VERSION-}" ] || export -f rebash
